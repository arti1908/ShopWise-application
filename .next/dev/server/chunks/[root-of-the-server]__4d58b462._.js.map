{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Documents/Github/ShopWise-application/app/api/search/route.ts"],"sourcesContent":["// Simple Next.js route handler for search\r\nimport { NextResponse } from 'next/server'\r\n\r\ntype Product = {\r\n  id: number\r\n  name: string\r\n  price: number\r\n  imageUrl: string\r\n  description: string\r\n  retailer: string\r\n  distance: number\r\n  originalPrice?: number\r\n  category?: string\r\n  inStock?: boolean\r\n  location?: string\r\n}\r\n\r\nconst demoProducts: Product[] = [\r\n  // Electronics / Tech\r\n  { id: 1, name: 'iPhone 14', price: 89900, imageUrl: '/iphone-14.png', description: 'Apple smartphone 128GB', retailer: 'Tech Store Tirana', distance: 2.5, originalPrice: 95000, category: 'Electronics', inStock: true, location: 'Tirana' },\r\n  { id: 2, name: 'Samsung Galaxy S23', price: 79900, imageUrl: '/samsung-galaxy-s23.png', description: 'Samsung smartphone 256GB', retailer: 'Mobile World', distance: 3.8, originalPrice: 85000, category: 'Electronics', inStock: true, location: 'Tirana' },\r\n  { id: 3, name: 'MacBook Air M2', price: 119900, imageUrl: '/macbook-air-m2.png', description: 'Apple laptop M2 chip', retailer: 'Computer Center', distance: 1.2, category: 'Computers', inStock: false, location: 'Tirana' },\r\n  { id: 4, name: 'Sony WH-1000XM5', price: 35900, imageUrl: '/wireless-headphones.png', description: 'Noise-cancelling headphones', retailer: 'Audio Pro', distance: 4.5, originalPrice: 39900, category: 'Audio', inStock: true, location: 'Durres' },\r\n  { id: 5, name: 'iPad Air', price: 59900, imageUrl: '/ipad-air.png', description: 'Apple tablet 64GB', retailer: 'iStore Albania', distance: 2.1, category: 'Tablets', inStock: true, location: 'Tirana' },\r\n  { id: 6, name: 'Dell XPS 15', price: 149900, imageUrl: '/dell-laptop.png', description: 'Professional laptop i7', retailer: 'Tech Hub', distance: 5.3, originalPrice: 159900, category: 'Computers', inStock: true, location: 'Shkoder' },\r\n\r\n  // ðŸ¸ Bars in Tirana\r\n  { id: 101, name: 'Radio Bar Tirana', price: 900, imageUrl: '/bars/radio-bar.jpg', description: 'Trendy cocktail bar in the heart of Tirana.', retailer: 'Radio Bar', distance: 0.8, category: 'Bars', inStock: true, location: 'Tirana' },\r\n  { id: 102, name: 'Nouvelle Vague', price: 1000, imageUrl: '/bars/nouvelle-vague.jpg', description: 'Stylish lounge bar with great music and drinks.', retailer: 'Nouvelle Vague', distance: 1.2, category: 'Bars', inStock: true, location: 'Tirana' },\r\n  { id: 103, name: 'Hemingway Bar', price: 850, imageUrl: '/bars/hemingway.jpg', description: 'Cozy bar inspired by classic cocktails and literature.', retailer: 'Hemingway Bar', distance: 1.6, category: 'Bars', inStock: true, location: 'Tirana' },\r\n  { id: 104, name: 'Komiteti Bar', price: 700, imageUrl: '/bars/komiteti.jpg', description: 'Traditional Albanian raki and local drinks.', retailer: 'Komiteti', distance: 0.5, category: 'Bars', inStock: true, location: 'Tirana' },\r\n]\r\n\r\nfunction parseBool(v: string | null) {\r\n  if (!v) return undefined\r\n  return v === '1' || v.toLowerCase() === 'true'\r\n}\r\n\r\nexport async function GET(req: Request) {\r\n  try {\r\n    const url = new URL(req.url)\r\n    const q = (url.searchParams.get('q') || '').trim().toLowerCase()\r\n    const category = url.searchParams.get('category') || ''\r\n    const seller = url.searchParams.get('seller') || ''\r\n    const priceMin = url.searchParams.get('priceMin')\r\n    const priceMax = url.searchParams.get('priceMax')\r\n    const inStock = parseBool(url.searchParams.get('inStock'))\r\n    const sort = url.searchParams.get('sort') || 'relevance' // lowest, highest, distance, relevance\r\n\r\n    let results = demoProducts.slice()\r\n\r\n    if (q) {\r\n      results = results.filter(p =>\r\n        (p.name + ' ' + p.description + ' ' + (p.retailer || '')).toLowerCase().includes(q)\r\n      )\r\n    }\r\n    if (category) {\r\n      results = results.filter(p => (p.category || '').toLowerCase() === category.toLowerCase())\r\n    }\r\n    if (seller) {\r\n      results = results.filter(p => (p.retailer || '').toLowerCase().includes(seller.toLowerCase()))\r\n    }\r\n    if (priceMin) {\r\n      const v = Number(priceMin)\r\n      if (!Number.isNaN(v)) results = results.filter(p => p.price >= v)\r\n    }\r\n    if (priceMax) {\r\n      const v = Number(priceMax)\r\n      if (!Number.isNaN(v)) results = results.filter(p => p.price <= v)\r\n    }\r\n    if (typeof inStock === 'boolean') {\r\n      results = results.filter(p => !!p.inStock === inStock)\r\n    }\r\n\r\n    // Sorting\r\n    if (sort === 'lowest') {\r\n      results.sort((a, b) => a.price - b.price)\r\n    } else if (sort === 'highest') {\r\n      results.sort((a, b) => b.price - a.price)\r\n    } else if (sort === 'distance') {\r\n      results.sort((a, b) => (a.distance || 0) - (b.distance || 0))\r\n    } else {\r\n      // relevance (default)\r\n      results.sort((a, b) => a.price - b.price)\r\n    }\r\n\r\n    return NextResponse.json({ results }, { status: 200 })\r\n  } catch (err) {\r\n    return NextResponse.json({ error: 'Internal Server Error' }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}}]
}